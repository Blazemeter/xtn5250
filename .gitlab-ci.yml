image: 836525813842.dkr.ecr.us-east-1.amazonaws.com/jmeter-plugins-build:3.1.1

variables:
  MAVEN_OPTS: -Dmaven.repo.local=.m2/repository
cache:
  paths:
    - .m2/repository/
build:
  stage: build
  tags:
    - docker
  except:
    - master
  script: 
    - mvn -e -X clean verify
  artifacts:
    paths:
      - target/xtn5250-*.jar
      - target/surefire-reports
    expire_in: 1 month